<div class="container mt-4">
  <h4 class="mb-3 text-center text-secondary">Manage Orders</h4>

  <!-- Search Bar -->
  <div class="mb-4">
    <input type="text" class="form-control border rounded-pill shadow-sm"
       placeholder="🔍 Search by Equipment Name or Hospital Name"
       [(ngModel)]="searchText"
       (ngModelChange)="page = 1">
  </div>

  <!-- Orders Table -->
  <div class="card border-0 shadow-sm">
    <div class="card-header bg-light text-dark fw-bold">
      Orders Information
    </div>
    <div class="card-body p-0">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-dark">
          <tr>
            <th>Sr#</th>

            <th>
              Order Date
              <span class="text-white ms-3" style="cursor:pointer;" (click)="sortOrderDate()">
                {{ sortAscending ? '↑' : '↓' }}
              </span>
            </th>

            <th>Quantity</th>
            <th>Status</th>
            <th>Equipment</th>
            <th>Hospital</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of filteredOrders | paginate: { itemsPerPage: 3, currentPage: page }; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ order.orderDate | date: 'dd-MMM-yyyy' }}</td>
            <td>{{ order.quantity }}</td>
            <td>
              <span class="badge bg-secondary">{{ order.status }}</span>
            </td>
            <td>
              <div><strong>Name: </strong> {{ order.equipmentName }}</div>
              <div><strong>Description: </strong>{{ order.equipmentDescription }}</div>
            </td>
            <td>
              <div><strong>Name: </strong> {{ order.hospitalName }}</div>
              <div><strong>Location: </strong>{{ order.hospitalLocation }}</div>
            </td>
            <td>
              <button class="btn btn-outline-primary btn-sm rounded-pill" (click)="edit(order)">
                Update Status
              </button>
            </td>
          </tr>
        </tbody>
      </table>

    </div>
  </div>
  <div class="d-flex justify-content-center my-3">
    <pagination-controls (pageChange)="page = $event"></pagination-controls>
  </div>

  <!-- Modal -->
  <div *ngIf="showModal" class="modal fade show d-block" tabindex="-1" style="background: rgba(0,0,0,0.3);">
    <div class="modal-dialog">
      <div class="modal-content border-0 shadow">
        <div class="modal-header bg-light">
          <h5 class="modal-title">Update Status</h5>
          <button type="button" class="btn-close" (click)="closeModal()"></button>
        </div>
        <div class="modal-body">
          <select class="form-select mb-3" [(ngModel)]="status">
            <option value="" disabled>Choose Status</option>
            <option value="Pending">Pending</option>
            <option value="Shipped">Shipped</option>
            <option value="Delivered">Delivered</option>
          </select>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline-secondary rounded-pill" (click)="closeModal()">Cancel</button>
          <button class="btn btn-primary rounded-pill" (click)="update(statusModel.orderId,status)">Save</button>
        </div>
      </div>
    </div>
  </div>
</div>